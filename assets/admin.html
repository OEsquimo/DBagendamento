// Elementos DOM do admin
const elementosAdmin = {
    loginSection: document.getElementById('loginSection'),
    adminContent: document.getElementById('adminContent'),
    adminEmail: document.getElementById('adminEmail'),
    adminPassword: document.getElementById('adminPassword'),
    btnLogin: document.getElementById('btnLogin'),
    loginMsg: document.getElementById('loginMsg'),
    servicosList: document.getElementById('servicosList'),
    cfgCompanyName: document.getElementById('cfgCompanyName'),
    cfgWhats: document.getElementById('cfgWhats')
};

// Dados de exemplo para o admin
const servicosAdmin = [
    {
        id: "1",
        name: "Limpeza Técnica",
        description: "Limpeza completa do equipamento",
        basePrice: 120,
        active: true,
        icon: "fas fa-soap"
    },
    {
        id: "2", 
        name: "Instalação",
        description: "Instalação profissional",
        basePrice: 300,
        active: true,
        icon: "fas fa-tools"
    },
    {
        id: "3",
        name: "Manutenção",
        description: "Manutenção preventiva",
        basePrice: 150,
        active: true,
        icon: "fas fa-wrench"
    },
    {
        id: "4",
        name: "Higienização",
        description: "Higienização completa",
        basePrice: 100,
        active: true,
        icon: "fas fa-spray-can"
    }
];

// Inicialização do admin
document.addEventListener('DOMContentLoaded', () => {
    // Verificar se está na página de admin
    if (elementosAdmin.btnLogin) {
        configurarEventListenersAdmin();
    }
});

// Configurar event listeners do admin
function configurarEventListenersAdmin() {
    elementosAdmin.btnLogin.addEventListener('click', fazerLoginAdmin);
}

// Simular login do admin
function fazerLoginAdmin() {
    const email = elementosAdmin.adminEmail.value;
    const senha = elementosAdmin.adminPassword.value;
    
    if (!email || !senha) {
        showMessage(elementosAdmin.loginMsg, 'Preencha todos os campos', false);
        return;
    }
    
    // Simular autenticação
    if (email === 'admin@esquimo.com' && senha === 'admin123') {
        elementosAdmin.loginSection.style.display = 'none';
        elementosAdmin.adminContent.style.display = 'block';
        carregarDadosAdmin();
    } else {
        showMessage(elementosAdmin.loginMsg, 'Credenciais inválidas', false);
    }
}

// Carregar dados do admin
function carregarDadosAdmin() {
    // Carregar serviços
    renderizarServicosAdmin();
    
    // Carregar configurações (simulado)
    elementosAdmin.cfgCompanyName.value = 'O Esquimó';
    elementosAdmin.cfgWhats.value = '(81) 99999-9999';
}

// Renderizar serviços no admin
function renderizarServicosAdmin() {
    elementosAdmin.servicosList.innerHTML = '';
    
    servicosAdmin.forEach(servico => {
        const card = document.createElement('div');
        card.className = 'service-card';
        card.innerHTML = `
            <i class="${servico.icon}"></i>
            <h3>${servico.name}</h3>
            <p>${servico.description}</p>
            <div class="budget-item">
                <span>Preço base:</span>
                <span>R$ ${servico.basePrice.toFixed(2)}</span>
            </div>
            <div class="service-quantity">
                <label>Status:</label>
                <span style="color: ${servico.active ? 'green' : 'red'}">
                    ${servico.active ? 'Ativo' : 'Inativo'}
                </span>
            </div>
        `;
        
        elementosAdmin.servicosList.appendChild(card);
    });
}

// Função para mostrar mensagens
function showMessage(element, text, isSuccess = true) {
    element.textContent = text;
    element.style.color = isSuccess ? 'green' : 'red';
    element.style.fontWeight = 'bold';
    
    setTimeout(() => {
        element.textContent = '';
    }, 3000);
}
